// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Anamnesis {
  id                              String    @id @default(uuid())
  athleteId                       String
  trainnerId                      String
  isAlcoholic                     Boolean
  isSmoker                        Boolean
  sleepQuality                    String
  PhysicalActivityHabits          String
  HydrationHabits                 String
  EatingHabits                    String
  AmountWater                     Float
  UseFoodSupplement               String
  isAnemic                        Boolean
  isDiabetic                      Boolean
  systolicBloodPressure           Int
  diastolicBloodPressure          Int
  restingHeartRate                Int
  heartProblems                   String?
  allergies                       String?
  otherDiseases                   String?
  medicalTreatments               String?
  medicationUse                   String?
  UseHealthDevice                 String?
  haveAnxiety                     Boolean
  haveDepression                  Boolean
  haveBipolarDisorder             Boolean
  haveObsessiveCompulsiveDisorder Boolean
  haveOtherDisorders              Boolean
  additionalObservations          String?
  createdAt                       DateTime  @default(now())
  updatedAt                       DateTime? @updatedAt

  // Relations
  trainner Trainer @relation(fields: [trainnerId], references: [id])
  athlete  Athlete @relation(fields: [athleteId], references: [id])

  @@map("anamenesis")
}

model Athlete {
  id           String    @id @default(uuid())
  passwordHash String
  name         String
  surname      String
  phone        String
  email        String    @unique
  sex          String
  addressId    String
  trainnerId   String?
  observation  String?
  birthDate    DateTime
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @updatedAt

  // Relations
  address       Address?
  trainner      Trainer?        @relation(fields: [trainnerId], references: [id])
  anamnesis     Anamnesis[]
  BodyValuation BodyValuation[]

  @@map("athlete")
}

model Address {
  id            String @id @default(uuid())
  address       String
  addressNumber String
  city          String
  state         String
  cep           String
  athleteId     String @unique

  // Relations
  Athlete Athlete @relation(fields: [athleteId], references: [id])

  @@map("address")
}

model BodyValuation {
  id         String @id @default(uuid())
  athleteId  String
  trainnerId String

  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt

  // RELATIONS
  trainner Trainer? @relation(fields: [trainnerId], references: [id])
  athlete  Athlete  @relation(fields: [athleteId], references: [id])

  @@map("body-valuation")
}

model Trainer {
  id           String @id @default(uuid())
  name         String
  surname      String
  passwordHash String
  phone        String

  athletes      Athlete[]
  Anamnesis     Anamnesis[]
  BodyValuation BodyValuation[]

  @@map("trainer")
}

model Exercise {
  id String @id @default(uuid())

  @@map("exercise")
}

model FlexEvaluation {
  id String @id @default(uuid())

  @@map("flex-evaluation")
}

model MethodExercise {
  id String @id @default(uuid())

  @@map("method-exercise")
}

model StatusPhoto {
  id String @id @default(uuid())

  @@map("status-photo")
}

model Target {
  id String @id @default(uuid())

  @@map("target")
}

model Training {
  id String @id @default(uuid())

  @@map("training")
}

model TrainingEvolution {
  id String @id @default(uuid())

  @@map("training-evolution")
}

// @ campo
// @@ tabela
